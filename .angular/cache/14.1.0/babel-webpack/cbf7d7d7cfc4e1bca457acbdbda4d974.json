{"ast":null,"code":"import { getRandomId, getScrollTop, debounce } from './util';\n\nvar assign = require('es6-object-assign').assign;\n\nvar find = require('array.prototype.find').shim();\n\nvar defaults = {\n  speed: \"auto\" //recommend!!\n\n};\n\nvar Backpax =\n/** @class */\nfunction () {\n  function Backpax(selector, option) {\n    var _this = this;\n\n    if (option === void 0) {\n      option = {};\n    }\n\n    if (selector instanceof NodeList) {\n      this.elements = selector;\n    } else {\n      this.elements = document.querySelectorAll(selector);\n    }\n\n    this.controls = [];\n    this.items = [];\n    this.options = assign({}, defaults, option);\n    this.move = 0;\n    this.setup();\n\n    if (\"requestAnimationFrame\" in window) {\n      document.addEventListener('scroll', function () {\n        _this.run();\n      }, {\n        passive: true\n      });\n    }\n\n    window.addEventListener('resize', debounce(function () {\n      [].forEach.call(_this.elements, function (element, index) {\n        var id = element.dataset.id;\n\n        if (id) {\n          var insert = document.getElementById(id);\n\n          if (insert) {\n            _this.setBestImg(element, insert, index);\n          }\n        }\n      });\n    }, 100));\n  }\n\n  Backpax.prototype.setBestImg = function (element, insert, index) {\n    var width = window.innerWidth;\n    var img = element.dataset.img;\n    var backgroundImage = img;\n    var points = Object.keys(element.dataset).reduce(function (ac, key) {\n      if (/img-\\d*/.test(key)) {\n        var match = key.match(/img-(\\d*)/);\n\n        if (match && match[1]) {\n          var point_1 = parseInt(match[1], 10);\n          ac.push({\n            point: point_1,\n            src: element.dataset[key]\n          });\n        }\n      }\n\n      return ac;\n    }, []);\n    points.sort(function (pointA, pointB) {\n      if (pointA.point < pointB.point) {\n        return -1;\n      }\n\n      return 1;\n    });\n    var point = points.find(function (p) {\n      if (width < p.point) {\n        return true;\n      }\n\n      return false;\n    });\n\n    if (point) {\n      backgroundImage = point.src;\n    }\n\n    var newBackground = \"url(\" + backgroundImage + \")\";\n\n    if (newBackground !== insert.style.backgroundImage) {\n      insert.style.backgroundImage = newBackground;\n    }\n\n    this.setImgRatio(element, backgroundImage, index);\n  };\n\n  Backpax.prototype.setup = function () {\n    var _this = this;\n\n    [].forEach.call(this.elements, function (element, index) {\n      element.style.position = 'relative';\n      element.style.overflow = 'hidden';\n      var id = getRandomId();\n      element.dataset.id = id;\n      var insert = document.createElement('div');\n      element.insertBefore(insert, null);\n\n      _this.setBestImg(element, insert, index);\n\n      insert.id = id;\n      insert.style.position = 'absolute';\n      insert.style.top = '0';\n      insert.style.left = '0';\n      insert.style.right = '0';\n      insert.style.bottom = '0';\n      insert.style.backgroundRepeat = 'no-repeat';\n      insert.style.backgroundPosition = 'bottom center';\n      insert.style.backgroundSize = 'cover';\n      insert.style.transformStyle = 'flat';\n      insert.style.backfaceVisibility = 'hidden';\n      insert.style.willChange = 'transform';\n\n      _this.items.push({\n        element: element,\n        insert: insert,\n        elementOffsetHeight: element.offsetHeight,\n        insertOffsetHeight: 0\n      });\n    });\n  };\n\n  Backpax.prototype.setImgRatio = function (element, image, index) {\n    var _this = this;\n\n    var img = new Image();\n\n    img.onload = function () {\n      var ratio = img.width / img.height;\n      var control = _this.controls[index];\n\n      if (control) {\n        control.ratio = ratio;\n      } else {\n        _this.controls[index] = {\n          ratio: ratio,\n          speed: parseInt(element.dataset.speed, 10)\n        };\n      }\n\n      var id = element.dataset.id;\n      var insert = document.getElementById(id);\n\n      if (insert) {\n        if (element.offsetHeight > element.offsetWidth / ratio) {\n          insert.style.height = element.style.height;\n          insert.style.width = element.offsetHeight * ratio + \"px\";\n        } else {\n          insert.style.height = element.offsetWidth / ratio + \"px\";\n          insert.style.width = '100%';\n        }\n\n        _this.items[index].insertOffsetHeight = insert.offsetHeight;\n      }\n    };\n\n    img.src = image;\n  };\n\n  Backpax.prototype.run = function () {\n    var _this = this;\n\n    var top = getScrollTop();\n    var windowHeight = window.innerHeight;\n    [].forEach.call(this.items, function (item, index) {\n      var element = item.element;\n      var insert = item.insert;\n      var offset = element.getBoundingClientRect().top + top;\n\n      if (!_this.controls[index] || !_this.controls[index].ratio) {\n        return;\n      }\n\n      var ratio = _this.controls[index].ratio;\n      var elementHeight = item.elementOffsetHeight;\n      var insertHeight = item.insertOffsetHeight;\n\n      if (top + windowHeight < offset) {\n        return;\n      }\n\n      var move = top + windowHeight - offset;\n      var bottom = elementHeight - insertHeight;\n      var speed = _this.options.speed;\n\n      if (speed === 'auto') {\n        if (ratio) {\n          speed = (insertHeight - elementHeight) / (windowHeight + elementHeight / 2);\n        } else {\n          return;\n        }\n      }\n\n      if (_this.controls[index] && _this.controls[index].speed) {\n        speed = _this.controls[index].speed;\n      }\n\n      var final = bottom + move * speed;\n\n      if (move !== _this.move) {\n        requestAnimationFrame(function () {\n          insert.style.transform = \"translateY(\" + Math.round(final) + \"px)\";\n        });\n      }\n\n      _this.move = move;\n    });\n  };\n\n  return Backpax;\n}();\n\nexport default Backpax;","map":{"version":3,"names":["getRandomId","getScrollTop","debounce","assign","require","find","shim","defaults","speed","Backpax","selector","option","_this","NodeList","elements","document","querySelectorAll","controls","items","options","move","setup","window","addEventListener","run","passive","forEach","call","element","index","id","dataset","insert","getElementById","setBestImg","prototype","width","innerWidth","img","backgroundImage","points","Object","keys","reduce","ac","key","test","match","point_1","parseInt","push","point","src","sort","pointA","pointB","p","newBackground","style","setImgRatio","position","overflow","createElement","insertBefore","top","left","right","bottom","backgroundRepeat","backgroundPosition","backgroundSize","transformStyle","backfaceVisibility","willChange","elementOffsetHeight","offsetHeight","insertOffsetHeight","image","Image","onload","ratio","height","control","offsetWidth","windowHeight","innerHeight","item","offset","getBoundingClientRect","elementHeight","insertHeight","final","requestAnimationFrame","transform","Math","round"],"sources":["/Users/stevenquesada/Documents/playa-colorada/node_modules/backpax/lib/index.js"],"sourcesContent":["import { getRandomId, getScrollTop, debounce } from './util';\nvar assign = require('es6-object-assign').assign;\nvar find = require('array.prototype.find').shim();\nvar defaults = {\n    speed: \"auto\" //recommend!!\n};\nvar Backpax = /** @class */ (function () {\n    function Backpax(selector, option) {\n        var _this = this;\n        if (option === void 0) { option = {}; }\n        if (selector instanceof NodeList) {\n            this.elements = selector;\n        }\n        else {\n            this.elements = document.querySelectorAll(selector);\n        }\n        this.controls = [];\n        this.items = [];\n        this.options = assign({}, defaults, option);\n        this.move = 0;\n        this.setup();\n        if (\"requestAnimationFrame\" in window) {\n            document.addEventListener('scroll', function () {\n                _this.run();\n            }, { passive: true });\n        }\n        window.addEventListener('resize', debounce(function () {\n            [].forEach.call(_this.elements, function (element, index) {\n                var id = element.dataset.id;\n                if (id) {\n                    var insert = document.getElementById(id);\n                    if (insert) {\n                        _this.setBestImg(element, insert, index);\n                    }\n                }\n            });\n        }, 100));\n    }\n    Backpax.prototype.setBestImg = function (element, insert, index) {\n        var width = window.innerWidth;\n        var img = element.dataset.img;\n        var backgroundImage = img;\n        var points = Object.keys(element.dataset).reduce(function (ac, key) {\n            if (/img-\\d*/.test(key)) {\n                var match = key.match(/img-(\\d*)/);\n                if (match && match[1]) {\n                    var point_1 = parseInt(match[1], 10);\n                    ac.push({\n                        point: point_1,\n                        src: element.dataset[key]\n                    });\n                }\n            }\n            return ac;\n        }, []);\n        points.sort(function (pointA, pointB) {\n            if (pointA.point < pointB.point) {\n                return -1;\n            }\n            return 1;\n        });\n        var point = points.find(function (p) {\n            if (width < p.point) {\n                return true;\n            }\n            return false;\n        });\n        if (point) {\n            backgroundImage = point.src;\n        }\n        var newBackground = \"url(\" + backgroundImage + \")\";\n        if (newBackground !== insert.style.backgroundImage) {\n            insert.style.backgroundImage = newBackground;\n        }\n        this.setImgRatio(element, backgroundImage, index);\n    };\n    Backpax.prototype.setup = function () {\n        var _this = this;\n        [].forEach.call(this.elements, function (element, index) {\n            element.style.position = 'relative';\n            element.style.overflow = 'hidden';\n            var id = getRandomId();\n            element.dataset.id = id;\n            var insert = document.createElement('div');\n            element.insertBefore(insert, null);\n            _this.setBestImg(element, insert, index);\n            insert.id = id;\n            insert.style.position = 'absolute';\n            insert.style.top = '0';\n            insert.style.left = '0';\n            insert.style.right = '0';\n            insert.style.bottom = '0';\n            insert.style.backgroundRepeat = 'no-repeat';\n            insert.style.backgroundPosition = 'bottom center';\n            insert.style.backgroundSize = 'cover';\n            insert.style.transformStyle = 'flat';\n            insert.style.backfaceVisibility = 'hidden';\n            insert.style.willChange = 'transform';\n            _this.items.push({\n                element: element,\n                insert: insert,\n                elementOffsetHeight: element.offsetHeight,\n                insertOffsetHeight: 0,\n            });\n        });\n    };\n    Backpax.prototype.setImgRatio = function (element, image, index) {\n        var _this = this;\n        var img = new Image();\n        img.onload = function () {\n            var ratio = img.width / img.height;\n            var control = _this.controls[index];\n            if (control) {\n                control.ratio = ratio;\n            }\n            else {\n                _this.controls[index] = {\n                    ratio: ratio,\n                    speed: parseInt(element.dataset.speed, 10)\n                };\n            }\n            var id = element.dataset.id;\n            var insert = document.getElementById(id);\n            if (insert) {\n                if (element.offsetHeight > element.offsetWidth / ratio) {\n                    insert.style.height = element.style.height;\n                    insert.style.width = element.offsetHeight * ratio + \"px\";\n                }\n                else {\n                    insert.style.height = element.offsetWidth / ratio + \"px\";\n                    insert.style.width = '100%';\n                }\n                _this.items[index].insertOffsetHeight = insert.offsetHeight;\n            }\n        };\n        img.src = image;\n    };\n    Backpax.prototype.run = function () {\n        var _this = this;\n        var top = getScrollTop();\n        var windowHeight = window.innerHeight;\n        [].forEach.call(this.items, function (item, index) {\n            var element = item.element;\n            var insert = item.insert;\n            var offset = element.getBoundingClientRect().top + top;\n            if (!_this.controls[index] || !_this.controls[index].ratio) {\n                return;\n            }\n            var ratio = _this.controls[index].ratio;\n            var elementHeight = item.elementOffsetHeight;\n            var insertHeight = item.insertOffsetHeight;\n            if (top + windowHeight < offset) {\n                return;\n            }\n            var move = top + windowHeight - offset;\n            var bottom = elementHeight - insertHeight;\n            var speed = _this.options.speed;\n            if (speed === 'auto') {\n                if (ratio) {\n                    speed = (insertHeight - elementHeight) / (windowHeight + (elementHeight / 2));\n                }\n                else {\n                    return;\n                }\n            }\n            if (_this.controls[index] && _this.controls[index].speed) {\n                speed = _this.controls[index].speed;\n            }\n            var final = bottom + (move * speed);\n            if (move !== _this.move) {\n                requestAnimationFrame(function () {\n                    insert.style.transform = \"translateY(\" + Math.round(final) + \"px)\";\n                });\n            }\n            _this.move = move;\n        });\n    };\n    return Backpax;\n}());\nexport default Backpax;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}